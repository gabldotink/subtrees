"use strict";(self.webpackChunkrecoil=self.webpackChunkrecoil||[]).push([[1587],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return d}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=r.createContext({}),s=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=s(e.components);return r.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,u=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=s(n),d=a,f=m["".concat(u,".").concat(d)]||m[d]||p[d]||o;return n?r.createElement(f,l(l({ref:t},c),{},{components:n})):r.createElement(f,l({ref:t},c))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var s=2;s<o;s++)l[s]=n[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9471:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return u},metadata:function(){return s},toc:function(){return c},default:function(){return m}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),l=["components"],i={title:"useRecoilCallback(callback, deps)",sidebar_label:"useRecoilCallback()"},u=void 0,s={unversionedId:"api-reference/core/useRecoilCallback",id:"api-reference/core/useRecoilCallback",title:"useRecoilCallback(callback, deps)",description:"Ce hook est similaire \xe0 useCallback(), mais fournira \xe9galement une API pour que vos rappels fonctionnent avec l'\xe9tat Recoil. Ce hook peut \xeatre utilis\xe9 pour construire un callback qui a acc\xe8s \xe0 un Snapshot en lecture seule de l'\xe9tat Recoil et la possibilit\xe9 de mettre \xe0 jour de mani\xe8re asynchrone l'\xe9tat Recoil actuel.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/api-reference/core/useRecoilCallback.md",sourceDirName:"api-reference/core",slug:"/api-reference/core/useRecoilCallback",permalink:"/fr/docs/api-reference/core/useRecoilCallback",editUrl:"https://github.com/facebookexperimental/Recoil/edit/docs/docs/i18n/fr/docusaurus-plugin-content-docs/current/api-reference/core/useRecoilCallback.md",tags:[],version:"current",frontMatter:{title:"useRecoilCallback(callback, deps)",sidebar_label:"useRecoilCallback()"},sidebar:"docs",previous:{title:"useRecoilTransaction()",permalink:"/fr/docs/api-reference/core/useRecoilTransaction"},next:{title:"Snapshot",permalink:"/fr/docs/api-reference/core/Snapshot"}},c=[{value:"Exemple de lecture diff\xe9r\xe9e",id:"exemple-de-lecture-diff\xe9r\xe9e",children:[],level:3}],p={toc:c};function m(e){var t=e.components,n=(0,a.Z)(e,l);return(0,o.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Ce hook est similaire \xe0 ",(0,o.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/hooks-reference.html#usecallback"},(0,o.kt)("em",{parentName:"a"},(0,o.kt)("inlineCode",{parentName:"em"},"useCallback()"))),", mais fournira \xe9galement une API pour que vos rappels fonctionnent avec l'\xe9tat Recoil. Ce hook peut \xeatre utilis\xe9 pour construire un callback qui a acc\xe8s \xe0 un ",(0,o.kt)("a",{parentName:"p",href:"/docs/api-reference/core/Snapshot"},(0,o.kt)("inlineCode",{parentName:"a"},"Snapshot"))," en lecture seule de l'\xe9tat Recoil et la possibilit\xe9 de mettre \xe0 jour de mani\xe8re asynchrone l'\xe9tat Recoil actuel."),(0,o.kt)("p",null,"Certaines motivations pour utiliser ce crochet peuvent inclure:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Lire l'\xe9tat Recoil de mani\xe8re asynchrone sans souscrire \xe0 un composant React pour effectuer un nouveau rendu si l'atome ou le s\xe9lecteur est mis \xe0 jour."),(0,o.kt)("li",{parentName:"ul"},"Reportez les recherches co\xfbteuses \xe0 une action asynchrone que vous ne voulez pas faire au moment du rendu."),(0,o.kt)("li",{parentName:"ul"},"Effectuer des effets secondaires o\xf9 vous souhaitez \xe9galement lire ou \xe9crire dans l'\xe9tat Recoil."),(0,o.kt)("li",{parentName:"ul"},"Mettre \xe0 jour dynamiquement un atome ou un s\xe9lecteur o\xf9 nous pouvons ne pas savoir au moment du rendu quel atome ou s\xe9lecteur nous voulons mettre \xe0 jour, nous ne pouvons donc pas utiliser ",(0,o.kt)("a",{parentName:"li",href:"/docs/api-reference/core/useSetRecoilState"},(0,o.kt)("inlineCode",{parentName:"a"},"useSetRecoilState()")),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/docs/guides/asynchronous-data-queries#pr%C3%A9-extraction"},"Pr\xe9lecture")," donn\xe9es avant le rendu.")),(0,o.kt)("hr",null),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"type CallbackInterface = {\n  snapshot: Snapshot,\n  gotoSnapshot: Snapshot => void,\n  set: <T>(RecoilState<T>, (T => T) | T) => void,\n  reset: <T>(RecoilState<T>) => void,\n};\n\nfunction useRecoilCallback<Args, ReturnValue>(\n  callback: CallbackInterface => (...Args) => ReturnValue,\n  deps?: $ReadOnlyArray<mixed>,\n): (...Args) => ReturnValue\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"callback"))," - La fonction de rappel utilisateur avec une fonction wrapper qui fournit une interface de rappel. Les rappels pour changer l'\xe9tat seront mis en file d'attente pour mettre \xe0 jour de mani\xe8re asynchrone l'\xe9tat Recoil actuel. La signature de type de la fonction encapsul\xe9e correspond \xe0 la signature de type du rappel renvoy\xe9."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"deps"))," - Un ensemble optionnel de d\xe9pendances pour m\xe9moriser le rappel. Comme ",(0,o.kt)("inlineCode",{parentName:"li"},"useCallback()"),", le callback produit ne sera pas m\xe9moris\xe9 par d\xe9faut et produira une nouvelle fonction \xe0 chaque rendu. Vous pouvez transmettre un tableau vide pour toujours renvoyer la m\xeame instance de fonction. Si vous passez des valeurs dans le tableau ",(0,o.kt)("inlineCode",{parentName:"li"},"deps"),", une nouvelle fonction sera utilis\xe9e si l'\xe9galit\xe9 de r\xe9f\xe9rence de tout dep change. Ces valeurs peuvent ensuite \xeatre utilis\xe9es \xe0 partir du corps de votre rappel sans devenir obsol\xe8tes. (Voir ",(0,o.kt)("a",{parentName:"li",href:"https://reactjs.org/docs/hooks-reference.html#usecallback"},(0,o.kt)("inlineCode",{parentName:"a"},"useCallback")),") Vous pouvez ",(0,o.kt)("a",{parentName:"li",href:"/docs/introduction/installation#eslint"},"mettre \xe0 jour eslint")," pour vous assurer qu'il est utilis\xe9 correctement .")),(0,o.kt)("p",null,"Interface de rappel:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"snapshot"))," - Le ",(0,o.kt)("a",{parentName:"li",href:"/docs/api-reference/core/Snapshot"},(0,o.kt)("inlineCode",{parentName:"a"},"Snapshot"))," fournit un aper\xe7u en lecture seule de l'\xe9tat de l'atome Recoil engag\xe9 avec un lot React lorsque la transaction actuelle, le rappel est appel\xe9 de commenc\xe9. Alors que les valeurs d'atome sont statiques, les s\xe9lecteurs asynchrones peuvent encore \xeatre en attente ou \xeatre r\xe9solus."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"gotoSnapshot"))," - Mettre en file d'attente la mise \xe0 jour de l'\xe9tat global pour qu'il corresponde au ",(0,o.kt)("a",{parentName:"li",href:"/docs/api-reference/core/Snapshot"},(0,o.kt)("inlineCode",{parentName:"a"}," Snapshot"))," fourni."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"set"))," - Mise en file d'attente d\xe9finissant la valeur d'un atome ou d'un s\xe9lecteur. Comme ailleurs, vous pouvez soit fournir la nouvelle valeur directement ou une fonction de mise \xe0 jour qui renvoie la nouvelle valeur et prend la valeur actuelle comme param\xe8tre. La valeur actuelle repr\xe9sente tous les autres changements d'\xe9tat mis en file d'attente \xe0 ce jour dans la transaction actuelle."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"reset"))," - R\xe9initialise la valeur d'un atome ou d'un s\xe9lecteur \xe0 sa valeur par d\xe9faut.")),(0,o.kt)("h3",{id:"exemple-de-lecture-diff\xe9r\xe9e"},"Exemple de lecture diff\xe9r\xe9e"),(0,o.kt)("p",null,"Cet exemple utilise ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"strong"},"useRecoilCallback()"))," pour lire de fa\xe7on diff\xe9r\xe9e l'\xe9tat sans souscrire \xe0 un composant \xe0 restituer lorsque l'\xe9tat change."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"import {atom, useRecoilCallback} from 'recoil';\n\nconst itemsInCart = atom({\n  key: 'itemsInCart',\n  default: 0,\n});\n\nfunction CartInfoDebug() {\n  const logCartItems = useRecoilCallback(({snapshot}) => async () => {\n    const numItemsInCart = await snapshot.getPromise(itemsInCart);\n    console.log('\xc9l\xe9ments dans le chariot: ', numItemsInCart);\n  });\n\n  return (\n    <div>\n      <button onClick={logCartItems}>Noter les \xe9l\xe9ments du chariot</button>\n    </div>\n  );\n}\n")))}m.isMDXComponent=!0}}]);