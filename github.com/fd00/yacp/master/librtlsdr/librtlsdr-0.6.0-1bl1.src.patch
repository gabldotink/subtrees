--- origsrc/librtlsdr-0.6.0/Makefile.am	2018-08-26 21:54:51.000000000 +0900
+++ src/librtlsdr-0.6.0/Makefile.am	2020-10-15 09:19:21.512691900 +0900
@@ -21,6 +21,7 @@ uninstall-udev-rules:
 
 EXTRA_DIST = git-version-gen .version
 
+if ENABLE_DOC
 if HAVE_DOXYGEN
 
 pkgdocdir=$(docdir)/$(PACKAGE)-$(VERSION)
@@ -45,5 +46,6 @@ uninstall-hook:
 DX_CLEAN = doc/{html,latex}/* doc/html.tar
 
 endif
+endif
 
 MOSTLYCLEANFILES = $(DX_CLEAN)
--- origsrc/librtlsdr-0.6.0/configure.ac	2018-08-26 21:54:51.000000000 +0900
+++ src/librtlsdr-0.6.0/configure.ac	2020-10-15 09:26:51.509195000 +0900
@@ -22,6 +22,11 @@ CFLAGS="$CFLAGS $LIBUSB_CFLAGS"
 AC_PATH_PROG(DOXYGEN,doxygen,false)
 AM_CONDITIONAL(HAVE_DOXYGEN, test $DOXYGEN != false)
 
+AC_ARG_ENABLE(doc,
+		[AS_HELP_STRING([--enable-doc], [Generated by doxygen], )],
+		[doc=$enableval], [doc="no"])
+AM_CONDITIONAL(ENABLE_DOC, test x"$doc" != "xno")
+
 AC_CONFIG_MACRO_DIR([m4])
 
 dnl checks for header files
--- origsrc/librtlsdr-0.6.0/src/Makefile.am	2018-08-26 21:54:51.000000000 +0900
+++ src/librtlsdr-0.6.0/src/Makefile.am	2020-10-15 09:13:30.778077700 +0900
@@ -10,7 +10,7 @@ AM_CFLAGS = ${CFLAGS} -fPIC ${SYMBOL_VIS
 lib_LTLIBRARIES = librtlsdr.la
 
 librtlsdr_la_SOURCES = librtlsdr.c tuner_e4k.c tuner_fc0012.c tuner_fc0013.c tuner_fc2580.c tuner_r82xx.c
-librtlsdr_la_LDFLAGS = -version-info $(LIBVERSION)
+librtlsdr_la_LDFLAGS = -no-undefined -version-info $(LIBVERSION)
 
 bin_PROGRAMS         = rtl_sdr rtl_tcp rtl_test rtl_fm rtl_eeprom rtl_adsb rtl_power
 
