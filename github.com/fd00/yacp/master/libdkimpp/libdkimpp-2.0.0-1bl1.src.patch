--- origsrc/libdkimpp-2.0.0/CMakeLists.txt	2019-07-03 06:31:56.000000000 +0900
+++ src/libdkimpp-2.0.0/CMakeLists.txt	2020-10-13 14:46:02.340789400 +0900
@@ -26,7 +26,7 @@ ADD_LIBRARY(${TARGET_NAME} SHARED
 SET_PROPERTY(TARGET ${TARGET_NAME} PROPERTY VERSION ${TARGET_VERSION})
 SET_PROPERTY(TARGET ${TARGET_NAME} PROPERTY SOVERSION ${TARGET_VERSION_MAJOR})
 
-IF("${CMAKE_SYSTEM}" MATCHES "Linux")
+IF("${CMAKE_SYSTEM}" MATCHES "Linux" OR CYGWIN)
 	SET(LIBRESOLV "resolv")
 	SET(LIBCRYPTO "crypto")
 ENDIF("${CMAKE_SYSTEM}" MATCHES "Linux")
@@ -35,7 +35,9 @@ IF("${CMAKE_SYSTEM}" MATCHES "OpenBSD")
 ENDIF("${CMAKE_SYSTEM}" MATCHES "OpenBSD")
 
 # Try with res_init
-ADD_DEFINITIONS(-DHAS_RES_NINIT)
+IF (NOT CYGWIN)
+	ADD_DEFINITIONS(-DHAS_RES_NINIT)
+ENDIF()
 ADD_DEFINITIONS("-std=c++11")
 
 TARGET_LINK_LIBRARIES(${TARGET_NAME}
@@ -63,9 +65,13 @@ ENDIF(NOT DEFINED LIB_INSTALL_DIR)
 
 FILE(GLOB_RECURSE files src/*.hpp)
 INSTALL(FILES ${files} DESTINATION include/libdkim++)
-INSTALL(FILES ${CMAKE_CURRENT_BINARY_DIR}/libdkim++.so DESTINATION lib${LIB_SUFFIX})
-INSTALL(FILES ${CMAKE_CURRENT_BINARY_DIR}/libdkim++.so.${TARGET_VERSION} DESTINATION lib${LIB_SUFFIX})
-INSTALL(FILES ${CMAKE_CURRENT_BINARY_DIR}/libdkim++.so.${TARGET_VERSION_MAJOR} DESTINATION lib${LIB_SUFFIX})
+IF (CYGWIN)
+	INSTALL(TARGETS ${TARGET_NAME} RUNTIME DESTINATION bin ARCHIVE DESTINATION lib)
+ELSE()
+	INSTALL(FILES ${CMAKE_CURRENT_BINARY_DIR}/libdkim++.so DESTINATION lib${LIB_SUFFIX})
+	INSTALL(FILES ${CMAKE_CURRENT_BINARY_DIR}/libdkim++.so.${TARGET_VERSION} DESTINATION lib${LIB_SUFFIX})
+	INSTALL(FILES ${CMAKE_CURRENT_BINARY_DIR}/libdkim++.so.${TARGET_VERSION_MAJOR} DESTINATION lib${LIB_SUFFIX})
+ENDIF()
 CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/libdkim++.pc.cmake ${CMAKE_CURRENT_BINARY_DIR}/libdkim++.pc @ONLY)
 INSTALL(FILES ${CMAKE_CURRENT_BINARY_DIR}/libdkim++.pc DESTINATION lib${LIB_SUFFIX}/pkgconfig)
 
--- origsrc/libdkimpp-2.0.0/libdkim++.pc.cmake	2019-07-03 06:31:56.000000000 +0900
+++ src/libdkimpp-2.0.0/libdkim++.pc.cmake	2020-10-13 14:56:45.262159200 +0900
@@ -8,3 +8,4 @@ Description: libdkim++ is a lightweight
 Version: @TARGET_VERSION@
 Libs: -L${libdir} -ldkim++
 Cflags: -I${includedir}
+Requires: libsodium openssl
