

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Report for models &mdash; REP (Reproducible Experiment Platform) 0.6.7 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="REP (Reproducible Experiment Platform) 0.6.7 documentation" href="index.html"/>
        <link rel="next" title="Metrics" href="metrics.html"/>
        <link rel="prev" title="Meta Machine Learning" href="metaml.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> REP (Reproducible Experiment Platform)
          

          
          </a>

          
            
            
              <div class="version">
                0.6.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="estimators.html">Estimators (classification and regression)</a></li>
<li class="toctree-l1"><a class="reference internal" href="metaml.html">Meta Machine Learning</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Report for models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-rep.report.classification">Classification Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-rep.report.regression">Regression Report</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="metrics.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallel.html">Parallel computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="reproducibility.html">REProducibility</a></li>
<li class="toctree-l1"><a class="reference external" href="http://nbviewer.ipython.org/github/yandex/rep/tree/master/howto/">Howto notebooks</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">REP (Reproducible Experiment Platform)</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Report for models</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/report.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="report-for-models">
<span id="report"></span><h1>Report for models<a class="headerlink" href="#report-for-models" title="Permalink to this headline">¶</a></h1>
<p>This module contains helpful classes to get a report for estimators, such as feature distribution,
prediction distribution, ROC curves, learning curves, and others, and compare them.</p>
<div class="section" id="module-rep.report.classification">
<span id="classification-report"></span><h2>Classification Report<a class="headerlink" href="#module-rep.report.classification" title="Permalink to this headline">¶</a></h2>
<p>This module contains report class for classification estimators. Report includes:</p>
<blockquote>
<div><ul class="simple">
<li>features scatter plots, distributions, correlations</li>
<li>learning curve</li>
<li>roc curve</li>
<li>efficiencies</li>
<li>metric vs cut</li>
<li>feature importance</li>
<li>feature importance by shuffling the feature column</li>
</ul>
</div></blockquote>
<p>All methods return objects, which have <cite>plot</cite> method (details see in <a class="reference internal" href="plotting.html#module-rep.plotting" title="rep.plotting"><code class="xref py py-class docutils literal"><span class="pre">rep.plotting</span></code></a>),
these objects contain raw information about things to be plotted.</p>
<dl class="class">
<dt id="rep.report.classification.ClassificationReport">
<em class="property">class </em><code class="descclassname">rep.report.classification.</code><code class="descname">ClassificationReport</code><span class="sig-paren">(</span><em>classifiers</em>, <em>lds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rep/report/classification.html#ClassificationReport"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rep.report.classification.ClassificationReport" title="Permalink to this definition">¶</a></dt>
<dd><p>Test estimators on any data. Supports ROC curve, prediction distribution, features information
(correlation matrix, distribution, scatter plots for pairs of features),
efficiencies for thresholds (evaluate flatness of predictions for important feature),
correlation with prediction for necessary feature, any metrics of quality.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>classifiers</strong> (<em>dict[str, Classifier]</em>) &#8211; estimators</li>
<li><strong>lds</strong> (<a class="reference internal" href="data.html#rep.data.storage.LabeledDataStorage" title="rep.data.storage.LabeledDataStorage"><em>LabeledDataStorage</em></a>) &#8211; data</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="rep.report.classification.ClassificationReport.compute_metric">
<code class="descname">compute_metric</code><span class="sig-paren">(</span><em>metric</em>, <em>mask=None</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport.compute_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute metric value</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metric</strong> &#8211; <p>function like object with:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y_true</span><span class="p">,</span> <span class="n">prob</span><span class="p">,</span> <span class="n">sample_weight</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><strong>mask</strong> (<em>None or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask, points we should use</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">metric value for each estimator</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.efficiencies">
<code class="descname">efficiencies</code><span class="sig-paren">(</span><em>features</em>, <em>thresholds=None</em>, <em>mask=None</em>, <em>bins=30</em>, <em>labels_dict=None</em>, <em>ignored_sideband=0.0</em>, <em>errors=False</em>, <em>grid_columns=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rep/report/classification.html#ClassificationReport.efficiencies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rep.report.classification.ClassificationReport.efficiencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Efficiencies for spectators</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>features</strong> (<em>None or list[str]</em>) &#8211; using features (if None then use classifier&#8217;s spectators)</li>
<li><strong>bins</strong> (<em>int or array-like</em>) &#8211; bins for histogram</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>thresholds</strong> (<em>list[float]</em>) &#8211; thresholds on prediction</li>
<li><strong>errors</strong> (<em>bool</em>) &#8211; if True then use errorbar, else interpolate function</li>
<li><strong>labels_dict</strong> (<em>None or OrderedDict(int: str)</em>) &#8211; label &#8211; name for class label
if None then {0: &#8216;bck&#8217;, &#8216;1&#8217;: &#8216;signal&#8217;}</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</li>
<li><strong>ignored_sideband</strong> (<em>float</em>) &#8211; (0, 1) percent of plotting data</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.efficiencies_2d">
<code class="descname">efficiencies_2d</code><span class="sig-paren">(</span><em>features</em>, <em>efficiency</em>, <em>mask=None</em>, <em>n_bins=20</em>, <em>ignored_sideband=0.0</em>, <em>labels_dict=None</em>, <em>grid_columns=2</em>, <em>signal_label=1</em>, <em>cmap='RdBu'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rep/report/classification.html#ClassificationReport.efficiencies_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rep.report.classification.ClassificationReport.efficiencies_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>For binary classification plots the dependence of efficiency on two columns</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>features</strong> &#8211; tuple of list with names of two features</li>
<li><strong>efficiency</strong> (<em>float</em>) &#8211; efficiency, float</li>
<li><strong>n_bins</strong> (<em>int or array-like</em>) &#8211; bins for histogram</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>labels_dict</strong> (<em>None or OrderedDict(int: str)</em>) &#8211; label &#8211; name for class label
if None then {0: &#8216;bck&#8217;, &#8216;1&#8217;: &#8216;signal&#8217;}</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</li>
<li><strong>ignored_sideband</strong> (<em>float</em>) &#8211; (0, 1) percent of plotting data</li>
<li><strong>signal_label</strong> (<em>int</em>) &#8211; label to calculate efficiency threshold</li>
<li><strong>cmap</strong> (<em>str</em>) &#8211; name of colormap used</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.feature_importance">
<code class="descname">feature_importance</code><span class="sig-paren">(</span><em>grid_columns=2</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport.feature_importance" title="Permalink to this definition">¶</a></dt>
<dd><p>Get features importance</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.feature_importance_shuffling">
<code class="descname">feature_importance_shuffling</code><span class="sig-paren">(</span><em>metric=LogLoss(regularization=1e-15)</em>, <em>mask=None</em>, <em>grid_columns=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rep/report/classification.html#ClassificationReport.feature_importance_shuffling"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rep.report.classification.ClassificationReport.feature_importance_shuffling" title="Permalink to this definition">¶</a></dt>
<dd><p>Get features importance using shuffling method (apply random permutation to one particular column)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metric</strong> &#8211; function to measure quality
function(y_true, proba, sample_weight=None)</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask which points the data we should train on</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; number of columns in grid</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.features_correlation_matrix">
<code class="descname">features_correlation_matrix</code><span class="sig-paren">(</span><em>features=None</em>, <em>mask=None</em>, <em>tick_labels=None</em>, <em>vmin=-1</em>, <em>vmax=1</em>, <em>cmap='Reds'</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport.features_correlation_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Correlation between features</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>features</strong> (<em>None or list[str]</em>) &#8211; using features (if None then use estimator&#8217;s features)</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>tick_labels</strong> (<em>None or array-like</em>) &#8211; names for features in matrix</li>
<li><strong>vmin</strong> (<em>int</em>) &#8211; min of value for min color</li>
<li><strong>vmax</strong> (<em>int</em>) &#8211; max of value for max color</li>
<li><strong>cmap</strong> (<em>str</em>) &#8211; color map name</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.ColorMap" title="rep.plotting.ColorMap">plotting.ColorMap</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.features_correlation_matrix_by_class">
<code class="descname">features_correlation_matrix_by_class</code><span class="sig-paren">(</span><em>features=None</em>, <em>mask=None</em>, <em>tick_labels=None</em>, <em>vmin=-1</em>, <em>vmax=1</em>, <em>labels_dict=None</em>, <em>grid_columns=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rep/report/classification.html#ClassificationReport.features_correlation_matrix_by_class"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rep.report.classification.ClassificationReport.features_correlation_matrix_by_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Correlation between features (built separately for each class)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>features</strong> (<em>None or list[str]</em>) &#8211; using features (if None then use classifier&#8217;s features)</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>labels_dict</strong> (<em>None or OrderedDict(int: str)</em>) &#8211; label &#8211; name for class label
if None then {0: &#8216;bck&#8217;, &#8216;1&#8217;: &#8216;signal&#8217;}</li>
<li><strong>tick_labels</strong> (<em>None or array-like</em>) &#8211; names for features in matrix</li>
<li><strong>vmin</strong> (<em>int</em>) &#8211; min of value for min color</li>
<li><strong>vmax</strong> (<em>int</em>) &#8211; max of value for max color</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.features_pdf">
<code class="descname">features_pdf</code><span class="sig-paren">(</span><em>features=None</em>, <em>mask=None</em>, <em>bins=30</em>, <em>ignored_sideband=0.0</em>, <em>labels_dict=None</em>, <em>grid_columns=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rep/report/classification.html#ClassificationReport.features_pdf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rep.report.classification.ClassificationReport.features_pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Features distribution (with errors)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>features</strong> (<em>None or list[str]</em>) &#8211; using features (if None then use classifier&#8217;s features)</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>bins</strong> (<em>int or array-like</em>) &#8211; count of bins or array with boarders</li>
<li><strong>labels_dict</strong> (<em>None or OrderedDict(int: str)</em>) &#8211; label &#8211; name for class label
if None then {0: &#8216;bck&#8217;, &#8216;1&#8217;: &#8216;signal&#8217;}</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</li>
<li><strong>ignored_sideband</strong> (<em>float</em>) &#8211; float from (0, 1), part of events ignored from the left and from the right</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.learning_curve">
<code class="descname">learning_curve</code><span class="sig-paren">(</span><em>metric</em>, <em>mask=None</em>, <em>steps=10</em>, <em>metric_label='metric'</em>, <em>predict_only_masked=True</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.classification.ClassificationReport.learning_curve" title="Permalink to this definition">¶</a></dt>
<dd><p>Get learning curves</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metric</strong> (<em>function</em>) &#8211; function looks like function
def function(y_true, y_pred, sample_weight=None)</li>
<li><strong>steps</strong> (<em>int or dict</em>) &#8211; if int, the same step is used in all learning curves,
otherwise dict with steps for each estimator</li>
<li><strong>metric_label</strong> (<em>str</em>) &#8211; name for metric on plot</li>
<li><strong>predict_only_masked</strong> (<em>bool</em>) &#8211; if True, will predict only for needed events.
When you build learning curves for FoldingClassifier/FoldingRegressor on the same dataset,
set this to False to get unbiased predictions.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.FunctionsPlot" title="rep.plotting.FunctionsPlot">plotting.FunctionsPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.metrics_vs_cut">
<code class="descname">metrics_vs_cut</code><span class="sig-paren">(</span><em>metric</em>, <em>mask=None</em>, <em>metric_label='metric'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rep/report/classification.html#ClassificationReport.metrics_vs_cut"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rep.report.classification.ClassificationReport.metrics_vs_cut" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw values of binary metric depending on the threshold on predictions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metric</strong> &#8211; binary metric (AMS, f1 or so - shall use only tpr and fpr)</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data used in comparison</li>
<li><strong>metric_label</strong> (<em>str</em>) &#8211; name for metric on plot</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.FunctionsPlot" title="rep.plotting.FunctionsPlot">plotting.FunctionsPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.prediction_pdf">
<code class="descname">prediction_pdf</code><span class="sig-paren">(</span><em>mask=None</em>, <em>target_class=1</em>, <em>bins=30</em>, <em>size=2</em>, <em>log=False</em>, <em>plot_type='error_bar'</em>, <em>normed=True</em>, <em>labels_dict=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rep/report/classification.html#ClassificationReport.prediction_pdf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rep.report.classification.ClassificationReport.prediction_pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Distribution of prediction for signal and bck separately with errors</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>target_class</strong> (<em>int or None</em>) &#8211; draw probabilities of being classified as target_class
(default 1, will draw signal probabilities).
If None, will draw probability corresponding to right class of each event.</li>
<li><strong>bins</strong> (<em>int or array-like</em>) &#8211; number of bins in histogram</li>
<li><strong>size</strong> (<em>int</em>) &#8211; points size on plots</li>
<li><strong>log</strong> (<em>bool</em>) &#8211; use logarithmic scale</li>
<li><strong>normed</strong> (<em>bool</em>) &#8211; draw normed pdf or not (normed by default)</li>
<li><strong>plot_type</strong> (<em>str</em>) &#8211; &#8216;error_bar&#8217; for error type and &#8216;bar&#8217; for hist type</li>
<li><strong>labels_dict</strong> (<em>None or OrderedDict(int: str)</em>) &#8211; names for class labels as dictionary
if None then {0: &#8216;bck&#8217;, &#8216;1&#8217;: &#8216;signal&#8217;}</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">plotting.ErrorPlot or plotting.BarPlot</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.roc">
<code class="descname">roc</code><span class="sig-paren">(</span><em>mask=None</em>, <em>signal_label=1</em>, <em>physics_notion=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rep/report/classification.html#ClassificationReport.roc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rep.report.classification.ClassificationReport.roc" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate roc functions for data and return roc plot object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>physics_notion</strong> (<em>bool</em>) &#8211; if set to True, will show signal efficiency vs background rejection,
otherwise TPR vs FPR.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.FunctionsPlot" title="rep.plotting.FunctionsPlot">plotting.FunctionsPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.classification.ClassificationReport.scatter">
<code class="descname">scatter</code><span class="sig-paren">(</span><em>correlation_pairs</em>, <em>mask=None</em>, <em>marker_size=20</em>, <em>alpha=0.1</em>, <em>labels_dict=None</em>, <em>grid_columns=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rep/report/classification.html#ClassificationReport.scatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rep.report.classification.ClassificationReport.scatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Correlation between pairs of features</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>correlation_pairs</strong> (<em>list[tuple]</em>) &#8211; pairs of features along which scatter plot will be build.</li>
<li><strong>mask</strong> (<em>None or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>marker_size</strong> (<em>int</em>) &#8211; size of marker for each event on the plot</li>
<li><strong>alpha</strong> (<em>float</em>) &#8211; blending parameter for scatter</li>
<li><strong>labels_dict</strong> (<em>None or OrderedDict(int: str)</em>) &#8211; label &#8211; name for class label
if None then {0: &#8216;bck&#8217;, &#8216;1&#8217;: &#8216;signal&#8217;}</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-rep.report.regression">
<span id="regression-report"></span><h2>Regression Report<a class="headerlink" href="#module-rep.report.regression" title="Permalink to this headline">¶</a></h2>
<p>This file contains report class for regression estimators. Report includes:</p>
<blockquote>
<div><ul class="simple">
<li>features scatter plots, correlations</li>
<li>learning curve</li>
<li>feature importance</li>
<li>feature importance by shuffling the feature column</li>
</ul>
</div></blockquote>
<p>All methods return objects, which can have plot method (details see in <a class="reference internal" href="plotting.html#module-rep.plotting" title="rep.plotting"><code class="xref py py-class docutils literal"><span class="pre">rep.plotting</span></code></a>)</p>
<dl class="class">
<dt id="rep.report.regression.RegressionReport">
<em class="property">class </em><code class="descclassname">rep.report.regression.</code><code class="descname">RegressionReport</code><span class="sig-paren">(</span><em>regressors</em>, <em>lds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rep/report/regression.html#RegressionReport"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rep.report.regression.RegressionReport" title="Permalink to this definition">¶</a></dt>
<dd><p>Report simplifies comparison of regressors on the same dataset.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>regressors</strong> (<em>dict[str, Regressor]</em>) &#8211; OrderedDict with regressors (RegressionFactory)</li>
<li><strong>lds</strong> (<a class="reference internal" href="data.html#rep.data.storage.LabeledDataStorage" title="rep.data.storage.LabeledDataStorage"><em>LabeledDataStorage</em></a>) &#8211; data</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="rep.report.regression.RegressionReport.compute_metric">
<code class="descname">compute_metric</code><span class="sig-paren">(</span><em>metric</em>, <em>mask=None</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.regression.RegressionReport.compute_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute metric value</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metric</strong> &#8211; <p>function like object with:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y_true</span><span class="p">,</span> <span class="n">prob</span><span class="p">,</span> <span class="n">sample_weight</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><strong>mask</strong> (<em>None or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask, points we should use</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">metric value for each estimator</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.regression.RegressionReport.feature_importance">
<code class="descname">feature_importance</code><span class="sig-paren">(</span><em>grid_columns=2</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.regression.RegressionReport.feature_importance" title="Permalink to this definition">¶</a></dt>
<dd><p>Get features importance</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.regression.RegressionReport.feature_importance_shuffling">
<code class="descname">feature_importance_shuffling</code><span class="sig-paren">(</span><em>metric=&lt;function mean_squared_error&gt;</em>, <em>mask=None</em>, <em>grid_columns=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rep/report/regression.html#RegressionReport.feature_importance_shuffling"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rep.report.regression.RegressionReport.feature_importance_shuffling" title="Permalink to this definition">¶</a></dt>
<dd><p>Get features importance using shuffling method (apply random permutation to one particular column)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metric</strong> &#8211; function to measure quality
function(y_true, y_predicted, sample_weight=None)</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask which points we should compare on</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; number of columns in grid</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.regression.RegressionReport.features_correlation_matrix">
<code class="descname">features_correlation_matrix</code><span class="sig-paren">(</span><em>features=None</em>, <em>mask=None</em>, <em>tick_labels=None</em>, <em>vmin=-1</em>, <em>vmax=1</em>, <em>cmap='Reds'</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.regression.RegressionReport.features_correlation_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Correlation between features</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>features</strong> (<em>None or list[str]</em>) &#8211; using features (if None then use estimator&#8217;s features)</li>
<li><strong>mask</strong> (<em>None or numbers.Number or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>tick_labels</strong> (<em>None or array-like</em>) &#8211; names for features in matrix</li>
<li><strong>vmin</strong> (<em>int</em>) &#8211; min of value for min color</li>
<li><strong>vmax</strong> (<em>int</em>) &#8211; max of value for max color</li>
<li><strong>cmap</strong> (<em>str</em>) &#8211; color map name</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.ColorMap" title="rep.plotting.ColorMap">plotting.ColorMap</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.regression.RegressionReport.learning_curve">
<code class="descname">learning_curve</code><span class="sig-paren">(</span><em>metric</em>, <em>mask=None</em>, <em>steps=10</em>, <em>metric_label='metric'</em>, <em>predict_only_masked=True</em><span class="sig-paren">)</span><a class="headerlink" href="#rep.report.regression.RegressionReport.learning_curve" title="Permalink to this definition">¶</a></dt>
<dd><p>Get learning curves</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metric</strong> (<em>function</em>) &#8211; function looks like function
def function(y_true, y_pred, sample_weight=None)</li>
<li><strong>steps</strong> (<em>int or dict</em>) &#8211; if int, the same step is used in all learning curves,
otherwise dict with steps for each estimator</li>
<li><strong>metric_label</strong> (<em>str</em>) &#8211; name for metric on plot</li>
<li><strong>predict_only_masked</strong> (<em>bool</em>) &#8211; if True, will predict only for needed events.
When you build learning curves for FoldingClassifier/FoldingRegressor on the same dataset,
set this to False to get unbiased predictions.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.FunctionsPlot" title="rep.plotting.FunctionsPlot">plotting.FunctionsPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.regression.RegressionReport.predictions_scatter">
<code class="descname">predictions_scatter</code><span class="sig-paren">(</span><em>features=None</em>, <em>mask=None</em>, <em>marker_size=20</em>, <em>alpha=0.1</em>, <em>grid_columns=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rep/report/regression.html#RegressionReport.predictions_scatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rep.report.regression.RegressionReport.predictions_scatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Correlation between predictions and features</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>features</strong> (<em>None or list[str]</em>) &#8211; using features (if None then use classifier&#8217;s features)</li>
<li><strong>mask</strong> (<em>None or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>marker_size</strong> (<em>int</em>) &#8211; size of marker for each event on the plot</li>
<li><strong>alpha</strong> (<em>float</em>) &#8211; blending parameter for scatter</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rep.report.regression.RegressionReport.scatter">
<code class="descname">scatter</code><span class="sig-paren">(</span><em>correlation_pairs</em>, <em>mask=None</em>, <em>marker_size=20</em>, <em>alpha=0.1</em>, <em>grid_columns=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rep/report/regression.html#RegressionReport.scatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rep.report.regression.RegressionReport.scatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Correlation between pairs of features</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>correlation_pairs</strong> (<em>list[tuple]</em>) &#8211; pairs of features along which scatter plot will be build.</li>
<li><strong>mask</strong> (<em>None or array-like or str or function(pandas.DataFrame)</em>) &#8211; mask for data, which will be used</li>
<li><strong>marker_size</strong> (<em>int</em>) &#8211; size of marker for each event on the plot</li>
<li><strong>alpha</strong> (<em>float</em>) &#8211; blending parameter for scatter</li>
<li><strong>grid_columns</strong> (<em>int</em>) &#8211; count of columns in grid</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="plotting.html#rep.plotting.GridPlot" title="rep.plotting.GridPlot">plotting.GridPlot</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="metrics.html" class="btn btn-neutral float-right" title="Metrics" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="metaml.html" class="btn btn-neutral" title="Meta Machine Learning" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2015, Yandex.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.6.7',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>